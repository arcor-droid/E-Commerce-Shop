<div class="order-detail-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <p>Loading order details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-message">
    <h2>⚠️ Error</h2>
    <p>{{ error }}</p>
    <button (click)="viewAllOrders()" class="btn-primary">View All Orders</button>
  </div>

  <!-- Order Details -->
  <div *ngIf="!loading && !error && order" class="order-details">
    <!-- Success Header -->
    <div class="success-header">
      <div class="success-icon">✓</div>
      <h1>Order Placed Successfully!</h1>
      <p class="success-message">Thank you for your order. Your order has been received and is being processed.</p>
    </div>

    <!-- Order Info Card -->
    <div class="order-info-card">
      <div class="order-header">
        <h2>Order #{{ order.id }}</h2>
        <span [class]="'status-badge ' + getStatusClass(order.status)">
          {{ order.status }}
        </span>
      </div>

      <div class="order-meta">
        <div class="meta-item">
          <span class="label">Order Date:</span>
          <span class="value">{{ formatDate(order.order_date) }}</span>
        </div>
        <div class="meta-item">
          <span class="label">Order Total:</span>
          <span class="value total">${{ order.total | number:'1.2-2' }}</span>
        </div>
      </div>
    </div>

    <!-- Order Items -->
    <div class="order-items-section">
      <h3>Order Items</h3>
      <div class="order-items">
        <div *ngFor="let item of order.order_items" class="order-item">
          <div class="item-image">
            <img [src]="'http://localhost:8000' + item.product_image" 
                 [alt]="item.product_title"
                 onerror="this.src='https://via.placeholder.com/100'">
          </div>

          <div class="item-details">
            <h4>{{ item.product_title }}</h4>
            <p *ngIf="item.selected_options" class="item-options">
              {{ formatOptions(item.selected_options) }}
            </p>
          </div>

          <div class="item-quantity">
            <span>Qty: {{ item.quantity }}</span>
          </div>

          <div class="item-price">
            <span class="price">${{ item.price | number:'1.2-2' }}</span>
            <span class="total">${{ item.price * item.quantity | number:'1.2-2' }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Order Summary -->
    <div class="order-summary">
      <h3>Order Summary</h3>
      <div class="summary-row">
        <span>Subtotal:</span>
        <span>${{ order.subtotal | number:'1.2-2' }}</span>
      </div>
      <div class="summary-row" *ngIf="order.tax > 0">
        <span>Tax:</span>
        <span>${{ order.tax | number:'1.2-2' }}</span>
      </div>
      <div class="summary-row" *ngIf="order.shipping_cost > 0">
        <span>Shipping:</span>
        <span>${{ order.shipping_cost | number:'1.2-2' }}</span>
      </div>
      <div class="summary-row summary-total">
        <span><strong>Total:</strong></span>
        <span><strong>${{ order.total | number:'1.2-2' }}</strong></span>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button (click)="viewAllOrders()" class="btn-secondary">
        View All Orders
      </button>
      <button (click)="continueShopping()" class="btn-primary">
        Continue Shopping
      </button>
    </div>
  </div>
</div>
